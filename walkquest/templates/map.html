
<!-- ...existing code... -->
<script src="https://cdn.jsdelivr.net/npm/iconify-icon@2.2.0-dev.2/dist/iconify-icon.min.js"></script>
<!-- ...existing code... -->
<script>
  const walks = {{ walks|safe }};
  walks.forEach(walk => {
    const iconElements = walk.icons.map(iconClass => {
      const iconElement = document.createElement('iconify-icon');
      iconElement.setAttribute('icon', iconClass);
      iconElement.setAttribute('width', '24');
      iconElement.setAttribute('height', '24');
      return iconElement.outerHTML;
    }).join(' ');

    const popupContent = `<h3>${walk.name}</h3><div>${iconElements}</div>`;

    new mapboxgl.Marker()
      .setLngLat([walk.longitude, walk.latitude])
      .setPopup(new mapboxgl.Popup().setHTML(popupContent))
      .addTo(map);
  });
</script>
<!-- ...existing code... -->
