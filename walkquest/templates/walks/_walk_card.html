{% load walk_tags %}

<article class="bg-white rounded-lg shadow-sm hover:shadow-md p-4 cursor-pointer transform transition-all duration-300 ease-in-out" 
         x-data="{ isVisible: false, isHovered: false }"
         x-intersect:enter.margin.200px="isVisible = true"
         x-intersect:leave="isVisible = false"
         @mouseenter="isHovered = true; $dispatch('walk-hover', '{{ walk.id }}')"
         @mouseleave="isHovered = false; $dispatch('walk-hover', null)"
         :class="{ 'scale-105': isVisible && isHovered, 'scale-100': !isHovered || !isVisible }"
         data-walk-id="{{ walk.id }}"
         data-features="{{ walk.features|as_json }}"
         data-distance="{{ walk.distance|default:0 }}"
         data-steepness="{{ walk.steepness_level|default:'NOVICE WANDERER' }}"
         role="listitem"
         tabindex="0">
    
    <div class="space-y-3">
        <h4 class="text-lg font-semibold text-gray-900">{{ walk.walk_name|default:"Unnamed Walk" }}</h4>
        <p class="text-sm text-gray-600">{{ walk.description|default:"No description available"|truncatewords:30 }}</p>
        
        <div class="flex flex-wrap gap-3 text-sm text-gray-600">
            {% if walk.distance %}
                <span class="inline-flex items-center gap-1">
                    <iconify-icon icon="mdi:map-marker-distance" class="w-5 h-5"></iconify-icon>
                    {{ walk.distance|floatformat:1 }} miles
                </span>
            {% endif %}
            
            {% if walk.duration %}
                <span class="inline-flex items-center gap-1">
                    <iconify-icon icon="mdi:clock-outline" class="w-5 h-5"></iconify-icon>
                    {{ walk.duration }}
                </span>
            {% endif %}
            
            {% if walk.steepness_level %}
                <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs
                    {% if walk.steepness_level == 'EASY' %}bg-green-100 text-green-800
                    {% elif walk.steepness_level == 'MODERATE' %}bg-yellow-100 text-yellow-800
                    {% else %}bg-red-100 text-red-800{% endif %}">
                    <iconify-icon icon="mdi:hiking" class="w-4 h-4"></iconify-icon>
                    {{ walk.steepness_level|default:"Novice"|title_with_spaces }}
                </span>
            {% endif %}
        </div>
    </div>
</article>
