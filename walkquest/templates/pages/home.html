{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load slippers %}

{% block title %}{% translate "Walks" %} - {{ block.super }}{% endblock %}

{% block extra_head %}
    <!-- Mapbox CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.9.4/mapbox-gl.css' rel='stylesheet' />
{% endblock %}

{% block content %}
    <!-- Embed JSON data safely -->
    {{ config|json_script:"config-data" }}
    {{ initial_walks|json_script:"walks-data" }}
    {{ tags_data|json_script:"tags-data" }}

    <!-- Error container -->
    <div id="error-container" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert"></div>

    <!-- Main content with Alpine.js -->
    <div class="layout-container" 
         x-data="walkInterface()"
         x-init="$nextTick(() => init())"
         x-cloak>
        <!-- Sidebar -->
        <aside class="sidebar"
               x-show="showSidebar"
               x-transition:enter="transition ease-out duration-300"
               x-transition:enter-start="opacity-0 transform translate-x-full"
               x-transition:enter-end="opacity-100 transform translate-x-0"
               x-transition:leave="transition ease-in duration-300"
               x-transition:leave-start="opacity-100 transform translate-x-0"
               x-transition:leave-end="opacity-0 transform translate-x-full">
            {% #walk_list %}{% /walk_list %}
        </aside>

        <!-- Map container -->
        <main class="map-container">
            <div x-ref="map" class="map"></div>
        </main>
    </div>
{% endblock %}

{% block javascript %}
    <!-- Mapbox JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.9.4/mapbox-gl.js'></script>
{% endblock %}
