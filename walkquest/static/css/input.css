@reference "./project.css";

/* /static/css/input.css */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');

/* Import Tailwind */
@import "tailwindcss";

/* Custom Styles */
@layer base {
    body {
        @apply bg-slate-50 align-middle dark:bg-gray-900 font-[IBM_Plex_Sans_Condensed];
    }
    * {
        font-family: 'IBM Plex Sans Condensed', system-ui, sans-serif;
    }
    
    iconify-icon {
        @apply align-middle;
    }
}

@utility scrollbar-hidden {
    &::-webkit-scrollbar {
        display: none;
    }
}

@layer components {
    .navbar {
        @apply fixed w-full bg-white/10 backdrop-blur-lg shadow-sm transition-all duration-300 
               border-b border-white/30;
        z-index: 50;  
        height: 4rem;
    }

    .nav-link {
        @apply text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200;
    }

    .message {
        @apply p-4 rounded-lg shadow-lg max-w-md bg-white relative;
    }

    .message-success {
        @apply bg-green-100 text-green-800 border-l-4 border-green-500;
    }

    .message-error {
        @apply bg-red-100 text-red-800 border-l-4 border-red-500;
    }

    .message-info {
        @apply bg-blue-100 text-blue-800 border-l-4 border-blue-500;
    }

    .message-warning {
        @apply bg-yellow-100 text-yellow-800 border-l-4 border-yellow-500;
    }

    /* Walk Card Components */
    .walk-item {
        @apply bg-white/5 backdrop-blur-md rounded-xl p-4 
               border border-white/20 hover:border-blue-200/50 
               hover:bg-white/10 relative;
        transform-style: preserve-3d;
        backface-visibility: hidden;
        will-change: transform, opacity;
        opacity: 0; /* Start invisible */
        transform: translateY(15px) scale(0.97); /* Initial transform state */
        pointer-events: none; /* Disable interaction until revealed */
    }

    /* Remove any transition properties since Motion handles animations */

    .walk-item.revealed {
        @apply opacity-100;
        transform: translateY(0) scale(1);
        pointer-events: auto; /* Re-enable interaction after animation */
    }

    .walk-item:not(.expanded):hover {
        @apply shadow-lg;
        transform: translateY(-4px) scale(1.01);
        background-color: rgba(255, 255, 255, 0.12);
        border-color: rgba(96, 165, 250, 0.5);
    }

    .walk-item.expanded {
        @apply shadow-xl bg-white/15;
        border-color: rgba(96, 165, 250, 0.5);
        transform: translateY(0) scale(1);
    }

    .walk-item:not(.expanded):active {
        transform: translateY(-2px) scale(1.005);
        transition-duration: 0.1s;
    }

    .walk-item-selected {
        @apply border-blue-500/50 bg-white/15 shadow-lg;
    }

    .walk-item:hover {
        @apply shadow-lg transform scale-[1.02];
    }

    .walk-item-pending {
        @apply opacity-75;
    }

    .expandable-content {
        height: 0;
        opacity: 0;
        margin-top: 0;
        will-change: height, opacity, margin-top;
        transition: height 0.5s ease-out, opacity 0.5s ease-out, margin-top 0.5s ease-out;
        transform-style: preserve-3d;
        transform-origin: top;
        backface-visibility: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    /* Subtle loading animations */
    .loading-pulse {
        @apply animate-pulse bg-blue-500/10;
    }

    .loading-spin {
        @apply animate-spin text-blue-500;
    }

    /* Fade transitions */
    .loading-fade {
        @apply transition-opacity duration-200;
    }

    .category-tag {
        @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium 
               transition-all duration-200;
        transform-origin: center center;
        will-change: transform;
    }

    .highlights {
        @apply text-sm text-gray-600 transition-all duration-300;
        will-change: transform, opacity;
    }

    .favorite-button {
        @apply p-1.5 rounded-full transition-all duration-200 transform;
    }

    .favorite-button-active {
        @apply text-yellow-400 hover:text-yellow-500 hover:scale-110;
    }

    .favorite-button-inactive {
        @apply text-gray-400 hover:text-gray-500 hover:scale-110;
    }

    .favorite-button-pending {
        @apply hover:cursor-not-allowed;
    }

    .loading-spinner {
        @apply animate-spin h-5 w-5 border-2 border-yellow-400 rounded-full border-t-transparent;
    }

    .map-wrapper {
        @apply fixed inset-0 overflow-hidden;
        z-index: 0;  /* Base layer */
    }

    .map {
        @apply fixed inset-0 w-full h-screen;
        z-index: 1;
    
        .map-container {
            @apply fixed inset-0 w-full h-full;
            z-index: 1;
        }
    
        .map-inner {
            @apply absolute inset-0;
            height: 100% !important;
            width: 100% !important;
            z-index: 1;
        }
    
        .mapboxgl-canvas {
            @apply absolute inset-0;
            height: 100% !important;
            width: 100% !important;
        }
    
        .map-loading {
            @apply absolute inset-0 bg-gray-100/80 backdrop-blur-sm flex items-center justify-center;
            z-index: 2;
        }
    
        .map-loading-spinner {
            @apply animate-spin h-8 w-8 text-blue-500;
        }
    }
    .sidebar {
        @apply fixed right-0 h-screen top-0 w-full md:w-[35rem] lg:w-[40rem] bg-white/15 backdrop-blur-lg shadow-lg
               transform transition-transform duration-300 ease-in-out border-l border-white/30;
        z-index: 40;  /* Middle layer */
    }

    .sidebar-toggle {
        @apply fixed top-4 right-4 z-50 p-2 rounded-full
               bg-white/80 backdrop-blur-sm shadow-md
               hover:shadow-lg hover:bg-white/90
               transition-all duration-200 ease-in-out;

        &[aria-expanded="true"] {
            @apply right-[24rem];
        }

        .icon {
            @apply w-6 h-6 text-gray-600;
        }
    }
} /* Close @layer components */

/* Keyframes for Active Marker Animation */
@keyframes markerBounce {
    0%, 100% {
        transform: scale(1.2) translateY(-5px);
    }
    50% {
        transform: scale(1.2) translateY(-8px);
    }
}

/* Reapply animation for active marker */
.walk-marker.active-marker {
    animation: markerBounce 0.6s ease-in-out;
}

@keyframes optimizedMarkerBounce {
    0%, 100% {
        transform: translate3d(0, -5px, 0) scale3d(1.2, 1.2, 1);
    }
    50% {
        transform: translate3d(0, -8px, 0) scale3d(1.2, 1.2, 1);
    }
}

.walk-marker.active-marker {
    animation: optimizedMarkerBounce 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    /* Optimize animation performance */
    animation-fill-mode: forwards;
    will-change: transform;
}
